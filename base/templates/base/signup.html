{% extends "navbar.html" %}
{% block content %}

<div>
    <h2> Sign Up </h2>
    <form method="POST" action="">
      {% csrf_token %}
      <label>Email:</label>
      <input type="email" name="email" placeholder="Enter your Email" required><br>
      <label>Password:</label>
      <input type="password" name="password" placeholder="Enter your Password" required><br>
      <label>CNIC number:</label>
      <input type="text" name="cnic" pattern="[0-9]{5}-[0-9]{7}-[0-9]{1}" placeholder="Enter your CNIC number without Dashes" required><br>
      <label>Date of Birth:</label>
      <input type="date" name="dob" placeholder="Enter your date of birth" min="{{ min_date }}" max="{{ max_date }}" required><br>
      <label>Phone Number:</label>
      <select name="country_code" id="country_code" onchange="updatePhonePattern()" required>
        <option value="" selected disabled>Select Country Code</option>
        {% for code, country_name in country_codes %}
          <option value="{{ code }}">{{ country_name }} ({{ code }})</option>
        {% endfor %}
      </select>
      <input type="text" id="phone" name="phone" placeholder="Enter your phone number" pattern="" required><br>
      <label>Address:</label>
      <input type="text" name="address" placeholder="Enter your address" required><br>
      <input type="submit" name="Submit" value="Submit"><br>
  
      <p>Already have login?</p> <a href="{% url 'login' %}">Login</a> <br>
    </form>
</div>

<script>
  var countryPatterns = {
    {% for code, pattern in country_patterns.items %}
    "{{ code }}": "{{ pattern }}",
    {% endfor %}
  };

  function updatePhonePattern() {
    var countryCodeSelect = document.getElementById('country_code');
    var phoneInput = document.getElementById('phone');
    var selectedCountryCode = countryCodeSelect.value;
    
    
    var phonePattern = countryPatterns[selectedCountryCode];
    phoneInput.setAttribute('pattern', phonePattern);
  }
</script>

{% endblock %}
